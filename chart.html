<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enrollment Statistics</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="./css/main.css">
    <style>
        body {
            background-color: black;
            color: white; 
        }

    </style>
</head>
<body>
    <header>
        <h1>Charts</h1>
    </header>
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="courses.html">Courses</a></li>
            <li><a href="users.html">Students</a></li>
            <li><a href="enrollments.html">Enrollments</a></li>
            <li><a href="chart.html">Charts</a></li>
            <li><a href="team.html">About Us</a></li>
        </ul>
    </nav>

    <canvas id="enrollmentChart" width="300" height="100"></canvas>

    <center>Number of Students Enrolled in Each subject</center>



    <script>
        // Dummy data for courses and enrollments
        let courses = [
            { id: 1, title: "Mathematics" },
            { id: 2, title: "Physics" },
            { id: 3, title: "Programming" }
        ];

        let enrollments = [
            { id: 1, userId: 1, courseId: 2 },
            { id: 2, userId: 2, courseId: 1 },
            { id: 3, userId: 2, courseId: 2 },
            { id: 4, userId: 3, courseId: 3 },
            { id: 5, userId: 4, courseId: 2 },
            { id: 6, userId: 5, courseId: 1 },
            { id: 7, userId: 6, courseId: 1 },
            { id: 8, userId: 7, courseId: 3 },
            { id: 9, userId: 8, courseId: 2 },
            { id: 10, userId: 9, courseId: 1 }
        ];


        // Function to generate enrollment statistics
        function generateEnrollmentStats() {
            let enrollmentCounts = {};

            // Count enrollments for each course
            courses.forEach(course => {
                const courseEnrollments = enrollments.filter(enrollment => enrollment.courseId === course.id);
                enrollmentCounts[course.title] = courseEnrollments.length;
            });

            return enrollmentCounts;
        }

        // Function to create the bar graph
        function createBarGraph(enrollmentCounts) {
            const ctx = document.getElementById('enrollmentChart').getContext('2d');

            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(enrollmentCounts),
                    datasets: [{
                        label: 'Enrollments',
                        data: Object.values(enrollmentCounts),
                        backgroundColor: 'rgb(54, 162, 235, 1)',
                        borderColor: 'rgb(54, 162, 235, 1.5)',
                        borderWidth: 0
                    }]
                },
                options: {

                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            }
                        }]
                    }
                }
            });
        }

        // Call functions to generate enrollment statistics and create the bar graph
        document.addEventListener("DOMContentLoaded", function () {
            const enrollmentCounts = generateEnrollmentStats();
            createBarGraph(enrollmentCounts);
        });


    </script>
</body>
</html>
